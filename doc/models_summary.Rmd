---
title: eye-tracking models
author: jw
output: html_document
---

```{r cod1, echo=FALSE, message=FALSE, warning=FALSE, cache=FALSE}

here::i_am("doc/models_summary.Rmd")

library(here)
library(knitr)
library(dplyr)
library(purrr)
library(readr)
library(fs)

source(here("src/models_summary.R"))

opts_chunk$set(echo = FALSE, results = "asis", fig.path = here("figs/"))

res <- dir_ls(here("results"), regexp =  "[a-z]+_(full)|(split)_models.csv") %>%
  map_dfr(read_csv, .id = "source") %>%
  mutate(source = path_file(source))
```


Contrasts:

```{r coding, eval = FALSE, include = TRUE, echo = TRUE, results = "markup"}

mutate(
    cond = case_when(
      quan_cond == "EEN" & subj_cond == "MATCH" & obj_cond == "MATCH" ~ "a",
      quan_cond == "EEN" & subj_cond == "MATCH" & obj_cond == "MIS" ~ "b",
      quan_cond == "EEN" & subj_cond == "MIS" & obj_cond == "MATCH" ~ "c",
      quan_cond == "EEN" & subj_cond == "MIS" & obj_cond == "MIS" ~ "d",
      quan_cond == "GEEN" & subj_cond == "MATCH" & obj_cond == "MATCH" ~ "e",
      quan_cond == "GEEN" & subj_cond == "MATCH" & obj_cond == "MIS" ~ "f",
      quan_cond == "GEEN" & subj_cond == "MIS" & obj_cond == "MATCH" ~ "g",
      quan_cond == "GEEN" & subj_cond == "MIS" & obj_cond == "MIS" ~ "h"
    ),
    quants = ifelse(quan_cond == "EEN", -1, 1),
    typic = ifelse(cond %in% c("a", "b", "e", "f"), 1, -1),
    interf = ifelse(cond %in% c("a", "c", "e", "g"), 1, -1),
```

All regions as coded in the file.


## Total fixation duration

Total fixations, all regions.

Full models.

```{r tot }
pps <- post_plots("totfixdur", dfs)
res %>%
  filter(source == "totfixdur_full_models.csv") %>%
  select(-source, -quant) %>%
  kable()
```

```{r pps1, results = "markup" }
pps$full_models
```

Models on data split per quantifier.

```{r tot2 }
res %>%
  filter(source == "totfixdur_split_models.csv") %>%
  select(-source) %>%
  kable()
```

```{r pps2, results = "markup" }
pps$split_models
```

## Re-reading duration

Data was excluded when the subj did not re-read the region.

Full models.

```{r rrdur }
pps <- post_plots("rrdur", dfs)
res %>%
  filter(source == "rrdur_full_models.csv") %>%
  select(-source, -quant) %>%
  kable()
```

```{r pps_rrdur, results = "markup" }
pps$full_models
```

Models on data split per quantifier.

```{r rrdur2 }
res %>%
  filter(source == "rrdur_split_models.csv") %>%
  select(-source) %>%
  kable()
```


```{r pps_rrdur2, results = "markup" }
pps$split_models
```

## First pass regression path

`rpdur`. Only if `> 0`. Full models.

```{r rpdur }
pps <- post_plots("rpdur", dfs[6:8])
res %>%
  filter(source == "rpdur_full_models.csv") %>%
  select(-source, -quant) %>%
  kable()
```

```{r pps_rpdur, results = "markup" }
pps$full_models
```

Models on data split per quantifier. 

```{r rpdur2 }
res %>%
  filter(source == "rpdur_split_models.csv") %>%
  select(-source) %>%
  kable()
```

```{r pps_rpdur2, results = "markup" }
pps$split_models
```

## First pass first gaze

`gdur`. Full models. Only on regions 6-7, 8, 9.

```{r gdur }
pps <- post_plots("gdur", dfs[6:8])
res %>%
  filter(source == "gdur_full_models.csv") %>%
  select(-source, -quant) %>%
  kable()
```

```{r pps_gdur, results = "markup" }
pps$full_models
```
Models on data split per quantifier. Only on regions 6-7, 8, 9.

```{r gdur2 }
res %>%
  filter(source == "gdur_split_models.csv") %>%
  select(-source) %>%
  kable()
```

```{r pps_gdur2, results = "markup" }
pps$split_models
```

## First pass total gaze

`tgdur`. Full models. Only on regions 6-7, 8, 9.

```{r tgdur }
pps <- post_plots("tgdur", dfs[6:8])
res %>%
  filter(source == "tgdur_full_models.csv") %>%
  select(-source, -quant) %>%
  kable()
```

```{r pps_tgdur, results = "markup" }
pps$full_models
```

Models on data split per quantifier. Only on regions 6-7, 8, 9.

```{r tgdur2 }
res %>%
  filter(source == "tgdur_split_models.csv") %>%
  select(-source) %>%
  kable()
```

```{r pps_tgdur2, results = "markup" }
pps$split_models
```
